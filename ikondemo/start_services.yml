---
- hosts: efus
  gather_facts: False
  tasks:
    - name: start multigrid efu
      command: "{{daemonize_cmd}} {{script_path}}/startefu_multigrid.bash"

    - name: start gem efu
      command: "{{daemonize_cmd}} {{script_path}}/startefu_gdgem.bash"

    - name: start sonde efu
      command: "{{daemonize_cmd}} {{script_path}}/startefu_sonde.bash"

# - hosts: sonde-gateway
#   gather_facts: False
#   tasks:
#     - name: setup packet gateway for sonde
#       shell: "{{daemonize_cmd}} nc -l -u 50011 | nc -u 10.4.0.215 9002"


- hosts: data-generators
  gather_facts: False
  tasks:
    - name: start multigrid data
      command: "{{daemonize_cmd}} {{script_path}}/datagen_multigrid.bash 10"

    - name: start gem data
      command: "{{daemonize_cmd}} {{script_path}}/datagen_gdgem.bash"

- hosts: packet-generator
  gather_facts: False
  tasks:
    - name: start carbon metrics collection
      command: "{{daemonize_cmd}} {{script_path}}/pktgen_fpga_config/pktgen_carbon.bash"

    - name: start packet generator
      command: "{{daemonize_cmd}} {{script_path}}/pktgen_fpga_config/rundemo"
      args:
        chdir: "{{script_path}}/pktgen_fpga_config/"
      become: True
